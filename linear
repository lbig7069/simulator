<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ê³µì§€ëŠ¥ ìˆ˜í•™: ì„ í˜•íšŒê·€ íƒêµ¬</title>
    <!-- Tailwind CSS (ìŠ¤íƒ€ì¼ë§) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- í°íŠ¸ ì„¤ì • -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        
        /* ìŠ¬ë¼ì´ë” ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #ffffff;
            border: 2px solid currentColor;
            cursor: pointer;
            margin-top: -8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #cbd5e1;
            border-radius: 2px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-600 text-white p-2 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z" />
                        </svg>
                    </div>
                    <span class="font-bold text-xl text-slate-900">AI Math: ì„ í˜•íšŒê·€ ì‹œë®¬ë ˆì´í„°</span>
                </div>
                <div class="flex items-center">
                    <span class="text-sm text-slate-500 bg-slate-100 px-3 py-1 rounded-full">ê³ ë“±í•™êµ ì¸ê³µì§€ëŠ¥ ê¸°ì´ˆ</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- ì‹œë®¬ë ˆì´í„° ë©”ì¸ ì„¹ì…˜ -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-12">
            
            <!-- ì™¼ìª½: ì¸í„°ë™í‹°ë¸Œ ìº”ë²„ìŠ¤ (8ì¹¸ ì°¨ì§€) -->
            <div class="lg:col-span-8 space-y-4">
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-1 relative overflow-hidden group">
                    <canvas id="mainCanvas" class="w-full h-[400px] md:h-[500px] bg-white cursor-crosshair touch-none"></canvas>
                    
                    <!-- ì•ˆë‚´ ë©”ì‹œì§€ ì˜¤ë²„ë ˆì´ -->
                    <div id="guideMsg" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center pointer-events-none transition-opacity duration-500 opacity-100">
                        <div class="bg-indigo-50/90 text-indigo-700 px-6 py-4 rounded-xl shadow-lg border border-indigo-100 backdrop-blur-sm">
                            <p class="font-bold text-lg mb-1">ğŸ‘† í™”ë©´ì„ í´ë¦­í•´ë³´ì„¸ìš”!</p>
                            <p class="text-sm">ë°ì´í„° ì ì„ ì¶”ê°€í•˜ë©´ AIê°€ í•™ìŠµí•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <!-- ì¢Œí‘œì¶• ë¼ë²¨ -->
                    <div class="absolute bottom-2 right-4 text-xs font-mono text-slate-400">X (ì…ë ¥)</div>
                    <div class="absolute top-4 left-2 text-xs font-mono text-slate-400">Y (ì¶œë ¥)</div>
                </div>
                
                <div class="flex justify-between items-center text-sm text-slate-500 px-2">
                    <p>ğŸ’¡ Tip: ì ì„ ì—¬ëŸ¬ ê°œ ì°ê³  <strong>ìë™ í•™ìŠµ</strong>ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.</p>
                    <button id="btnClear" class="text-red-500 hover:text-red-700 hover:underline flex items-center gap-1 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                        ëª¨ë“  ì  ì§€ìš°ê¸°
                    </button>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ì»¨íŠ¸ë¡¤ íŒ¨ë„ (4ì¹¸ ì°¨ì§€) -->
            <div class="lg:col-span-4 space-y-6">
                
                <!-- ìˆ˜ì‹ ì¹´ë“œ -->
                <div class="bg-white rounded-2xl shadow-lg border border-indigo-100 p-6 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-2 h-full bg-indigo-500"></div>
                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-2">Linear Model</h3>
                    <div class="text-3xl font-mono font-bold text-slate-800 mb-1">
                        y = <span id="dispW" class="text-indigo-600">1.0</span>x + <span id="dispB" class="text-pink-600">0.0</span>
                    </div>
                    <p class="text-xs text-slate-500 mt-2">
                        ì§ì„ ì˜ ë°©ì •ì‹ (1ì°¨ í•¨ìˆ˜)
                    </p>
                </div>

                <!-- ì˜¤ì°¨(Loss) ì¹´ë“œ -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                    <div class="flex justify-between items-end mb-2">
                        <h3 class="font-bold text-slate-700">í‰ê·  ì œê³± ì˜¤ì°¨ (MSE)</h3>
                        <span id="dispLoss" class="text-2xl font-bold text-slate-800">0.00</span>
                    </div>
                    <div class="w-full bg-slate-100 rounded-full h-2.5 overflow-hidden">
                        <div id="lossBar" class="bg-red-500 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <p class="text-xs text-slate-400 mt-2 text-right">ì˜¤ì°¨ê°€ 0ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì •í™•í•œ ëª¨ë¸ì…ë‹ˆë‹¤.</p>
                </div>

                <!-- íŒŒë¼ë¯¸í„° ì¡°ì ˆ -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 space-y-8">
                    
                    <!-- ê¸°ìš¸ê¸° W -->
                    <div class="relative">
                        <div class="flex justify-between mb-2">
                            <label for="rangeW" class="font-bold text-indigo-700 flex items-center gap-2">
                                <span>ê¸°ìš¸ê¸° (Weight)</span>
                                <span class="bg-indigo-100 text-indigo-700 text-xs px-2 py-0.5 rounded">w</span>
                            </label>
                            <input type="number" id="inputW" value="1.0" step="0.1" class="w-16 text-right text-sm border-b border-slate-300 focus:outline-none focus:border-indigo-500 font-mono">
                        </div>
                        <input type="range" id="rangeW" min="-5" max="5" step="0.01" value="1" class="w-full accent-indigo-600 text-indigo-600">
                    </div>

                    <!-- ì ˆí¸ B -->
                    <div class="relative">
                        <div class="flex justify-between mb-2">
                            <label for="rangeB" class="font-bold text-pink-600 flex items-center gap-2">
                                <span>Yì ˆí¸ (Bias)</span>
                                <span class="bg-pink-100 text-pink-600 text-xs px-2 py-0.5 rounded">b</span>
                            </label>
                            <input type="number" id="inputB" value="0.0" step="0.1" class="w-16 text-right text-sm border-b border-slate-300 focus:outline-none focus:border-pink-500 font-mono">
                        </div>
                        <input type="range" id="rangeB" min="-5" max="5" step="0.01" value="0" class="w-full accent-pink-600 text-pink-600">
                    </div>

                    <button id="btnOptimize" class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-xl shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        AI ìë™ ìµœì í™” ì‹¤í–‰
                    </button>
                </div>
            </div>
        </div>

        <!-- í•˜ë‹¨: í•™ìŠµ ìë£Œ (ê°œë… ì„¤ëª…) -->
        <div class="border-t border-slate-200 pt-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-6">ğŸ“š í•µì‹¬ ê°œë… ë‹¤ì§€ê¸°</h2>
            <div class="grid md:grid-cols-3 gap-6">
                <!-- ì¹´ë“œ 1 -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 hover:shadow-md transition">
                    <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mb-4 text-indigo-600 font-bold text-xl">1</div>
                    <h3 class="font-bold text-lg mb-2">ì„ í˜• íšŒê·€ë€?</h3>
                    <p class="text-slate-600 text-sm leading-relaxed">
                        ë³µì¡í•œ ë°ì´í„°ë¥¼ ê°€ì¥ ì˜ ì„¤ëª…í•˜ëŠ” <strong>í•˜ë‚˜ì˜ ì§ì„ </strong>ì„ ì°¾ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. 
                        X(ì…ë ¥)ë¥¼ ì•Œë©´ Y(ê²°ê³¼)ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
                    </p>
                </div>
                <!-- ì¹´ë“œ 2 -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 hover:shadow-md transition">
                    <div class="w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center mb-4 text-pink-600 font-bold text-xl">2</div>
                    <h3 class="font-bold text-lg mb-2">ì˜¤ì°¨(MSE)ì˜ ì—­í• </h3>
                    <p class="text-slate-600 text-sm leading-relaxed">
                        ë°ì´í„° ì ë“¤ê³¼ ì§ì„  ì‚¬ì´ì˜ ê±°ë¦¬(ì”ì°¨)ë¥¼ ì œê³±í•´ì„œ í‰ê· ì„ ë‚¸ ê°’ì…ë‹ˆë‹¤. 
                        ì´ ê°’ì´ <strong>ì‘ì„ìˆ˜ë¡</strong> ì •í™•í•œ ëª¨ë¸ì…ë‹ˆë‹¤.
                    </p>
                </div>
                <!-- ì¹´ë“œ 3 -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 hover:shadow-md transition">
                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mb-4 text-yellow-600 font-bold text-xl">3</div>
                    <h3 class="font-bold text-lg mb-2">ìµœì í™”(í•™ìŠµ)</h3>
                    <p class="text-slate-600 text-sm leading-relaxed">
                        ì˜¤ì°¨ë¥¼ ìµœì†Œë¡œ ë§Œë“œëŠ” <span class="text-indigo-600 font-bold">w</span>ì™€ <span class="text-pink-600 font-bold">b</span>ë¥¼ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. 
                        ì¸ê³µì§€ëŠ¥ì€ ìˆ˜í•™(ë¯¸ë¶„)ì„ ì´ìš©í•´ ì´ë¥¼ ìë™ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">AI Education Project</p>
            <p class="text-xs">HTML5 Canvas & JavaScript | No External Libraries Required</p>
        </div>
    </footer>

    <!-- ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ì „ì—­ ë²”ìœ„ ì˜¤ì—¼ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ IIFE(ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜)ë¡œ ê°ìŒ‰ë‹ˆë‹¤.
        (function() {
            // --- ì „ì—­ ë³€ìˆ˜ (í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ìœ íš¨) ---
            const canvas = document.getElementById('mainCanvas');
            const ctx = canvas.getContext('2d');
            const guideMsg = document.getElementById('guideMsg');

            // ìƒíƒœ
            let points = [];
            let W = 1.0;
            let B = 0.0;
            
            // ì¢Œí‘œ ì„¤ì • (ë…¼ë¦¬ì  ì¢Œí‘œ -10 ~ 10)
            const VIEW_RANGE = 10;
            let scaleX, scaleY, originX, originY;

            // UI ìš”ì†Œ
            const ui = {
                dispW: document.getElementById('dispW'),
                dispB: document.getElementById('dispB'),
                dispLoss: document.getElementById('dispLoss'),
                lossBar: document.getElementById('lossBar'),
                rangeW: document.getElementById('rangeW'),
                rangeB: document.getElementById('rangeB'),
                inputW: document.getElementById('inputW'),
                inputB: document.getElementById('inputB'),
            };

            // --- ì´ˆê¸°í™” ---
            function init() {
                resize();
                window.addEventListener('resize', resize);
                
                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
                canvas.addEventListener('pointerdown', handleCanvasClick);
                
                ui.rangeW.addEventListener('input', (e) => updateModel(parseFloat(e.target.value), B));
                ui.rangeB.addEventListener('input', (e) => updateModel(W, parseFloat(e.target.value)));
                
                ui.inputW.addEventListener('change', (e) => updateModel(parseFloat(e.target.value), B));
                ui.inputB.addEventListener('change', (e) => updateModel(W, parseFloat(e.target.value)));
                
                document.getElementById('btnClear').addEventListener('click', () => {
                    points = [];
                    guideMsg.style.opacity = '1';
                    updateModel(1.0, 0.0);
                });

                document.getElementById('btnOptimize').addEventListener('click', runOptimization);

                // ì´ˆê¸° ë°ì´í„° ì˜ˆì œ (ì˜µì…˜)
                // points = [{x: -3, y: -2}, {x: 1, y: 2}, {x: 4, y: 3}];
                // guideMsg.style.opacity = '0';
                
                draw();
            }

            // --- í™”ë©´ í¬ê¸° ì¡°ì • ---
            function resize() {
                const parent = canvas.parentElement;
                canvas.width = parent.clientWidth;
                canvas.height = parent.clientHeight || 500;
                
                originX = canvas.width / 2;
                originY = canvas.height / 2;
                
                const minDim = Math.min(canvas.width, canvas.height);
                scaleX = (minDim - 60) / (VIEW_RANGE * 2); 
                scaleY = (minDim - 60) / (VIEW_RANGE * 2);
                
                draw();
            }

            // --- ì¢Œí‘œ ë³€í™˜ ---
            const toScreen = (x, y) => ({
                x: originX + x * scaleX,
                y: originY - y * scaleY
            });
            
            const toLogical = (sx, sy) => ({
                x: (sx - originX) / scaleX,
                y: -(sy - originY) / scaleY
            });

            // --- í•µì‹¬ ë¡œì§ ---
            function updateModel(newW, newB) {
                W = newW;
                B = newB;
                
                // UI ë™ê¸°í™”
                ui.rangeW.value = W;
                ui.rangeB.value = B;
                ui.inputW.value = W.toFixed(2);
                ui.inputB.value = B.toFixed(2);
                
                ui.dispW.innerText = W.toFixed(2);
                ui.dispB.innerText = B.toFixed(2);
                
                calculateLoss();
                draw();
            }

            function calculateLoss() {
                if (points.length === 0) {
                    ui.dispLoss.innerText = "0.00";
                    ui.lossBar.style.width = "0%";
                    return;
                }
                
                let totalError = 0;
                points.forEach(p => {
                    const pred = W * p.x + B;
                    totalError += Math.pow(p.y - pred, 2);
                });
                const mse = totalError / points.length;
                
                ui.dispLoss.innerText = mse.toFixed(2);
                
                // ì‹œê°ì  ë°” (ìµœëŒ€ 50ì„ ê¸°ì¤€ìœ¼ë¡œ % ê³„ì‚°)
                const percentage = Math.min((mse / 50) * 100, 100);
                ui.lossBar.style.width = `${percentage}%`;
                
                // ì˜¤ì°¨ì— ë”°ë¼ ìƒ‰ìƒ ë³€ê²½
                if(mse < 1) ui.lossBar.className = "bg-green-500 h-2.5 rounded-full transition-all duration-300";
                else if(mse < 10) ui.lossBar.className = "bg-yellow-400 h-2.5 rounded-full transition-all duration-300";
                else ui.lossBar.className = "bg-red-500 h-2.5 rounded-full transition-all duration-300";
            }

            function handleCanvasClick(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const p = toLogical(x, y);
                
                // ë²”ìœ„ ì œí•œ
                if(Math.abs(p.x) > VIEW_RANGE || Math.abs(p.y) > VIEW_RANGE) return;
                
                points.push(p);
                
                // ì•ˆë‚´ ë©”ì‹œì§€ ìˆ¨ê¹€
                if(points.length > 0) guideMsg.style.opacity = '0';
                
                calculateLoss();
                draw();
            }

            function runOptimization() {
                if (points.length < 2) {
                    alert("ì ì´ 2ê°œ ì´ìƒ í•„ìš”í•©ë‹ˆë‹¤.");
                    return;
                }

                // ìµœì†ŒììŠ¹ë²• ê³µì‹
                const n = points.length;
                let sumX=0, sumY=0, sumXY=0, sumXX=0;
                
                for(let p of points) {
                    sumX += p.x;
                    sumY += p.y;
                    sumXY += p.x * p.y;
                    sumXX += p.x * p.x;
                }
                
                const meanX = sumX / n;
                const meanY = sumY / n;
                const denominator = sumXX - n * meanX * meanX;

                if (Math.abs(denominator) < 1e-5) return; // ìˆ˜ì§ì„  ì˜ˆì™¸ì²˜ë¦¬

                const targetW = (sumXY - n * meanX * meanY) / denominator;
                const targetB = meanY - targetW * meanX;

                // ì• ë‹ˆë©”ì´ì…˜
                animateTo(targetW, targetB);
            }

            function animateTo(targetW, targetB) {
                const startW = W;
                const startB = B;
                const startTime = performance.now();
                const duration = 800; // ms

                function loop(time) {
                    const elapsed = time - startTime;
                    const t = Math.min(elapsed / duration, 1);
                    
                    // Ease out cubic
                    const ease = 1 - Math.pow(1 - t, 3);
                    
                    updateModel(
                        startW + (targetW - startW) * ease,
                        startB + (targetB - startB) * ease
                    );

                    if (t < 1) requestAnimationFrame(loop);
                }
                requestAnimationFrame(loop);
            }

            // --- ê·¸ë¦¬ê¸° ---
            function draw() {
                // ì´ˆê¸°í™”
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ê·¸ë¦¬ë“œ
                ctx.strokeStyle = '#f1f5f9';
                ctx.lineWidth = 1;
                ctx.beginPath();
                for(let i = -VIEW_RANGE; i <= VIEW_RANGE; i++) {
                    let s = toScreen(i, i);
                    // ì„¸ë¡œì„ 
                    ctx.moveTo(s.x, 0); ctx.lineTo(s.x, canvas.height);
                    // ê°€ë¡œì„ 
                    ctx.moveTo(0, s.y); ctx.lineTo(canvas.width, s.y);
                }
                ctx.stroke();
                
                // ì¶•
                ctx.strokeStyle = '#cbd5e1';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, originY); ctx.lineTo(canvas.width, originY);
                ctx.moveTo(originX, 0); ctx.lineTo(originX, canvas.height);
                ctx.stroke();

                // ë°ì´í„° ì 
                points.forEach(p => {
                    const s = toScreen(p.x, p.y);
                    
                    // ì”ì°¨ (ì ì„ )
                    const predY = W * p.x + B;
                    const sPred = toScreen(p.x, predY);
                    
                    ctx.beginPath();
                    ctx.strokeStyle = '#fda4af'; // Pink-300
                    ctx.setLineDash([4, 4]);
                    ctx.lineWidth = 2;
                    ctx.moveTo(s.x, s.y);
                    ctx.lineTo(sPred.x, sPred.y);
                    ctx.stroke();
                    ctx.setLineDash([]);

                    // ì 
                    ctx.beginPath();
                    ctx.fillStyle = '#1e293b'; // Slate-800
                    ctx.arc(s.x, s.y, 6, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // ì  í…Œë‘ë¦¬ (Hover íš¨ê³¼ ëŠë‚Œ)
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                });

                // íšŒê·€ì„ 
                const startX = -VIEW_RANGE * 1.5;
                const endX = VIEW_RANGE * 1.5;
                
                const sStart = toScreen(startX, W * startX + B);
                const sEnd = toScreen(endX, W * endX + B);
                
                ctx.beginPath();
                ctx.strokeStyle = '#4f46e5'; // Indigo-600
                ctx.lineWidth = 4;
                ctx.shadowColor = "rgba(79, 70, 229, 0.3)";
                ctx.shadowBlur = 10;
                ctx.moveTo(sStart.x, sStart.y);
                ctx.lineTo(sEnd.x, sEnd.y);
                ctx.stroke();
                ctx.shadowBlur = 0;
            }

            // ì‹¤í–‰
            init();
        })();
    </script>
</body>
</html>
